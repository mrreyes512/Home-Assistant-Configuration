###########################################################
#
# Home Assistant Automation - Action
#
############################################################

############################################################
# Trigger: When the scene.halloween is activated
############################################################
- id:               halloween_on
  alias:            'Halloween Mode ON'
  trigger:
    - platform:     state
      entity_id:    input_boolean.halloween_mode
      to:           'on'

  action:
  # Setting Hue Lights
  - service:        hue.hue_activate_scene
    data:
      group_name:   "Living Room"
      scene_name:   "Halloween"
  - service:        hue.hue_activate_scene
    data:
      group_name:   "Master"
      scene_name:   "Halloween"
  #Hue wouldn't activate Halloween scene in Office. This is a workaround
  - service:        light.turn_on 
    entity_id:      
      - light.office_lamp
    data:
      brightness:   127

  # Setting Vera Lights
  - service:        light.turn_off
    entity_id:      
      - light.master_5

  - service:        light.turn_on
    entity_id:      
      - light.chandelier_12
      - light.living_room_tree_7
      - light.mail_table_4
      - light.mobile_2_14   #Above the office entry
      - light.mobile_3_11   #Stairs lights
    data:
      brightness:   40

  - service:        light.turn_on
    entity_id:      light.light_strip
    data:
      effect:       lightning

  - service:        tts.google_say
    entity_id:      media_player.living_room_speaker
    data:
      message:      "Trick or Treat"


############################################################
# Trigger: When the scene.halloween is deactivated
############################################################
- id:               halloween_off
  alias:            'Halloween Mode OFF'
  trigger:
    - platform:     state
      entity_id:    input_boolean.halloween_mode
      to:           'off'

  action:
  # Setting Hue Lights
  - service:        hue.hue_activate_scene
    data:
      group_name:   "Living Room"
      scene_name:   "Normal"
  - service:        hue.hue_activate_scene
    data:
      group_name:   "Master"
      scene_name:   "Normal"
  
# Setting Vera Lights
  - service:        light.turn_on
    entity_id:      
      - light.master_5
      - light.office_lamp
    data:
      brightness:   254

  - service:        light.turn_off
    entity_id:      
      - light.chandelier_12
      - light.living_room_tree_7
      - light.mail_table_4
      - light.mobile_2_14   #Above the office entry
      - light.mobile_3_11   #Stairs lights

  - service:        light.turn_off
    entity_id:      light.light_strip
